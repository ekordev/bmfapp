!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("babel-runtime/regenerator"),require("babel-runtime/core-js/object/assign"),require("babel-runtime/helpers/asyncToGenerator"),require("babel-runtime/core-js/get-iterator"),require("babel-runtime/core-js/object/create"),require("babel-runtime/core-js/map"),require("path-to-regexp")):"function"==typeof define&&define.amd?define(["exports","babel-runtime/regenerator","babel-runtime/core-js/object/assign","babel-runtime/helpers/asyncToGenerator","babel-runtime/core-js/get-iterator","babel-runtime/core-js/object/create","babel-runtime/core-js/map","path-to-regexp"],r):r(e.UniversalRouter=e.UniversalRouter||{},e._regeneratorRuntime,e._Object$assign,e._asyncToGenerator,e._getIterator,e._Object$create,e._Map,e.toRegExp)}(this,function(e,r,t,a,n,i,u,s){"use strict";function o(e){if("string"!=typeof e&&0!==e.length)return e;try{return decodeURIComponent(e)}catch(r){throw r instanceof URIError&&(r.message="Failed to decode param '"+e+"'",r.status=400),r}}function c(e,r,t){var a=r+"|"+e,n=f.get(a);if(!n){var u=[];n={pattern:s(r,u,{end:e}),keys:u},f.set(a,n)}var c=n.pattern.exec(t);if(!c)return null;for(var p=i(null),b=c[0],d=1;d<c.length;d++)p[n.keys[d-1].name]=void 0!==c[d]?o(c[d]):void 0;return{path:""===b?"/":b,keys:n.keys.slice(),params:p}}function p(e,t,a){var i,u,s,o,c,f,h,v;return r.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=void 0,e.children){r.next=6;break}if(i=b(e.path,a),!i){r.next=6;break}return r.next=6,{route:e,baseUrl:t,path:i.path,keys:i.keys,params:i.params};case 6:if(!e.children){r.next=37;break}if(i=d(e.path,a),!i){r.next=37;break}return r.next=11,{route:e,baseUrl:t,path:i.path,keys:i.keys,params:i.params};case 11:u=!0,s=!1,o=void 0,r.prev=14,c=n(e.children);case 16:if(u=(f=c.next()).done){r.next=23;break}return h=f.value,v=a.substr(i.path.length),r.delegateYield(p(h,t+("/"===i.path?"":i.path),v.startsWith("/")?v:"/"+v),"t0",20);case 20:u=!0,r.next=16;break;case 23:r.next=29;break;case 25:r.prev=25,r.t1=r["catch"](14),s=!0,o=r.t1;case 29:r.prev=29,r.prev=30,!u&&c["return"]&&c["return"]();case 32:if(r.prev=32,!s){r.next=35;break}throw o;case 35:return r.finish(32);case 36:return r.finish(29);case 37:case"end":return r.stop()}},l[0],this,[[14,25,29,37],[30,,32,36]])}r="default"in r?r["default"]:r,t="default"in t?t["default"]:t,a="default"in a?a["default"]:a,n="default"in n?n["default"]:n,i="default"in i?i["default"]:i,u="default"in u?u["default"]:u,s="default"in s?s["default"]:s;var f=new u,b=c.bind(void 0,!0),d=c.bind(void 0,!1),l=[p].map(r.mark),h=function(){var e=a(r.mark(function n(e,i){var u,s,o,c,f,b,d,l=function(){var e=a(r.mark(function n(){var e,a;return r.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=d.next(),c=e.value,f=e.done,!c||f){r.next=23;break}if(a=t({},u,c),!c.route.action){r.next=23;break}if(!b){r.next=20;break}return r.prev=7,r.next=10,c.route.action(a,a.params);case 10:return r.abrupt("return",r.sent);case 13:return r.prev=13,r.t0=r["catch"](7),r.t0.status=r.t0.status||500,a.error=r.t0,r.abrupt("return",b.action(a,a.params));case 18:r.next=23;break;case 20:return r.next=22,c.route.action(a,a.params);case 22:return r.abrupt("return",r.sent);case 23:return r.abrupt("return",void 0);case 24:case"end":return r.stop()}},n,this,[[7,13]])}));return function(){return e.apply(this,arguments)}}();return r.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:u="string"==typeof i||i instanceof String?{path:i}:i,s=Array.isArray(e)?{path:"/",children:e}:e,o=void 0,c=void 0,f=!1,b=s.children&&s.children.find(function(e){return"/error"===e.path}),d=p(s,"",u.path),u.next=l,u.end=function(e){o=e,f=!0};case 9:if(f){r.next=17;break}return r.next=12,l();case 12:if(o=r.sent,void 0===o){r.next=15;break}return r.abrupt("break",17);case 15:r.next=9;break;case 17:if(void 0!==o||!b){r.next=21;break}return u.error=new Error("Not found"),u.error.status=404,r.abrupt("return",b.action(u,{}));case 21:return r.abrupt("return",o);case 22:case"end":return r.stop()}},n,this)}));return function(r,t){return e.apply(this,arguments)}}(),v={resolve:h,match:h};e.resolve=h,e.match=h,e["default"]=v});